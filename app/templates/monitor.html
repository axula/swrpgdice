<html>
    <head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <title>Star Wars Dice Roller Monitor</title>
		<!-- CSS files -->
		<link href="/static/css/style.css" rel="stylesheet">
		<link href="/static/css/bootstrap.min.css" rel="stylesheet">
		<!-- Javascript -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
        <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
                // change to an empty string to use the global namespace
                // the socket.io documentation recommends sending an 
                // explicit package upon connection
                // this is specially important when using the global namespace
                var socket = io.connect('http://' + document.domain + ':' + location.port + '/swdice');
                // event handler for server sent data
                // the data is displayed in the "Received" section of the page
                socket.on('edroll', function(msg) {
                        var data = $.parseJSON(msg.data);
                        var dice = data["dice"];
                        var date = new Date()
                        var roll = "<div class='roll-entry'><table><tr><td class='player-date'><strong>" + data["player"] + "</strong> rolled at " + date.toLocaleTimeString() + ": </td><td class='dice-rolls'>";
                        $(dice).each(function (i) {
                                roll += "<img src='/static/swdice/" + dice[i] + ".png' /> ";
                        })
                        var totalstring = data["total"];
                        roll += "</td><td class='roll-results'>" + totalstring + "</td>";
                        roll += "</table></div>";
                        $('#placeholder').prepend(roll);
                });
                // event handler for new connections
                socket.on('connect', function() {
                        return false;
                });
        });
        </script>
    </head>
    <body>
	<div class="container-fluid"><div class="row"><div class="col-md-12">
		<h3>Recent rolls</h3>
		<div id='placeholder' class="list-unstyled"></div>
	</div></div></div>
	
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="/static/js/bootstrap.min.js"></script>
    </body>
</html>
